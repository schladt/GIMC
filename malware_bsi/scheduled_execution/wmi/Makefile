# Compiler settings for wmi_persistence_bsi.cpp
CXX = cl
CXXFLAGS = /EHsc /W3 /O2
LIBS = wbemuuid.lib ole32.lib oleaut32.lib

TARGET = wmi_persistence_bsi.exe
SOURCE = wmi_persistence_bsi.cpp

all: $(TARGET)

$(TARGET): $(SOURCE)
	$(CXX) $(CXXFLAGS) $(SOURCE) /Fe$(TARGET) /link $(LIBS)

clean:
	del $(TARGET) *.obj

run: $(TARGET)
	$(TARGET)

# MinGW alternative
mingw:
	g++ $(SOURCE) -o $(TARGET) -lole32 -loleaut32 -lwbemuuid -static

.PHONY: all clean run mingw
